# brew completion
if type brew &>/dev/null; then
  FPATH=$(brew --prefix)/share/zsh/site-functions:${FPATH}
  zstyle ':completion:*' list-prompt ''
  zstyle ':completion:*' select-prompt ''
  zstyle ':completion:*' menu yes select
  autoload -Uz compinit
  if [ -d "$HOME/.zcompdump" ]; then
    if [ $(date +'%j') != $(stat -f '%Sm' -t '%j' "$HOME/.zcompdump") ]; then
      compinit
    else
      compinit -C
    fi
  else
    compinit
  fi
fi

# variables and path
export CLICOLOR=1
export PATH="/opt/homebrew/opt/curl/bin:$PATH"
export PATH="/opt/homebrew/opt/node@18/bin:$PATH"

# prompt
autoload -Uz vcs_info
precmd() { vcs_info }
zstyle ':vcs_info:git:*' formats ' %F{6}(%b)%f'
setopt PROMPT_SUBST
PROMPT='%F{2}%~%f${vcs_info_msg_0_} '

# alias
CODE_SPACE="$HOME/Codespaces"
CODE_BASE="$CODE_SPACE/my-macos-build"
SCRIPT_HOME="$CODE_BASE/scripts"
CONFIG_HOME="$CODE_BASE/configs"
alias ll='ls -lh'
alias la='ls -lah'
alias mmb="code $CODE_BASE"
alias mkgif="sh $SCRIPT_HOME/mkgif.sh"
alias ebk="sh $SCRIPT_HOME/ebk.sh $CONFIG_HOME"
alias urb="sh $SCRIPT_HOME/urb.sh $SCRIPT_HOME $CONFIG_HOME"
alias ua="sh $SCRIPT_HOME/ua.sh $CODE_SPACE"
alias rec="sh $SCRIPT_HOME/rec.sh"
alias rea="sh $SCRIPT_HOME/rea.sh"
alias re4="sh $SCRIPT_HOME/re4.sh"
alias rsl="defaults write com.apple.dock ResetLaunchPad -bool true;killall Dock"

# plugins
source '/opt/homebrew/share/zsh-autosuggestions/zsh-autosuggestions.zsh'
source '/opt/homebrew/opt/zsh-fast-syntax-highlighting/share/zsh-fast-syntax-highlighting/fast-syntax-highlighting.plugin.zsh'
ZSH_AUTOSUGGEST_STRATEGY=(history completion)

# pnpm
export PNPM_HOME="/Users/$USER/Library/pnpm"
case ":$PATH:" in
  *":$PNPM_HOME:"*) ;;
  *) export PATH="$PNPM_HOME:$PATH" ;;
esac
# pnpm end