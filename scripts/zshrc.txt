# brew completion
if type brew &>/dev/null; then
  FPATH=$(brew --prefix)/share/zsh/site-functions:${FPATH}
  zstyle ':completion:*' list-prompt ''
  zstyle ':completion:*' select-prompt ''
  zstyle ':completion:*' menu yes select
  autoload -Uz compinit
  if [ $(date +'%j') != $(stat -f '%Sm' -t '%j' ~/.zcompdump) ]; then
    compinit
  else
    compinit -C
  fi
fi

# variables and path
export CLICOLOR=1
export PATH="/opt/homebrew/opt/mysql-client@5.7/bin:$PATH"
# nvm
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion
alias nvm="unalias nvm; [ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh"; nvm $@" # This lazy loads nvm

# prompt
autoload -Uz vcs_info
precmd() { vcs_info }
zstyle ':vcs_info:git:*' formats ' %F{6}(%b)%f'
setopt PROMPT_SUBST
PROMPT='%F{2}%~%f${vcs_info_msg_0_} %% '

# alias
CODE_BASE="$HOME/Codespaces/my-macos-build"
SCRIPT_HOME="$CODE_BASE/scripts"
SCRIPT_PRIVATE_HOME="$HOME/.ssh"
alias ll='ls -lh'
alias la='ls -lah'
alias mmb="code $CODE_BASE"
alias mkgif="sh $SCRIPT_HOME/make-gif.sh"
alias ebk="sh $SCRIPT_HOME/extension-config-backup.sh"
alias urb="sh $SCRIPT_HOME/ublock-rule-backup.sh"
alias ua="sh $SCRIPT_HOME/update-all.sh"
alias rec="sh $SCRIPT_HOME/re-encode.sh"
alias rsl="sh $SCRIPT_PRIVATE_HOME/reset_dock.sh"
alias boxvpn="sh $SCRIPT_PRIVATE_HOME/vpn.sh"
alias boxrsync="sh $SCRIPT_PRIVATE_HOME/rsync.sh"
alias boxdump="sh $SCRIPT_PRIVATE_HOME/sqldump.sh"

# plugins
source '/opt/homebrew/share/zsh-autosuggestions/zsh-autosuggestions.zsh'
source '/opt/homebrew/opt/zsh-fast-syntax-highlighting/share/zsh-fast-syntax-highlighting/fast-syntax-highlighting.plugin.zsh'
ZSH_AUTOSUGGEST_STRATEGY=(history completion)
