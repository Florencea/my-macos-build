# Next.js Note

- <https://nextjs.org/docs/getting-started>
- Works with npm, yarn, yarn2, pnpm
- Official: yarn

## Next.js

```bash
yarn create next-app --typescript
```

- `package.json`

```json
{
  "prettier": {
    "semi": false,
    "singleQuote": true,
    "trailingComma": "none"
  }
}
```

- Disable telemetry

```bash
printf "NEXT_TELEMETRY_DISABLED=1\n" >> .env
```

## Ant Design

```bash
yarn add antd @ant-design/icons @ant-design/colors next-with-less less less-loader
```

- `next.config.js`

```js
/** @type {import('next').NextConfig} */
const withLess = require('next-with-less')
const { volcano } = require('@ant-design/colors')

module.exports = withLess({
  exportPathMap: async () => ({
    '/': { page: '/' }
  }),
  images: {
    loader: 'custom'
  },
  reactStrictMode: true,
  lessLoaderOptions: {
    lessOptions: {
      modifyVars: {
        'primary-color': volcano.primary
      }
    }
  }
})
```

- `pages/_app.tsx`

```tsx
import { ConfigProvider } from 'antd'
import 'antd/dist/antd.dark.less'
import zhTW from 'antd/lib/locale/zh_TW'
import moment from 'moment'
import 'moment/locale/zh-tw'
import type { AppProps } from 'next/app'
import '../styles/globals.css'

moment.locale('zh-tw')

function MyApp({ Component, pageProps }: AppProps) {
  return (
    <ConfigProvider locale={zhTW}>
      <Component {...pageProps} />
    </ConfigProvider>
  )
}

export default MyApp
```

## Tailwind CSS

```bash
yarn add -D tailwindcss postcss autoprefixer
```

```bash
yarn run tailwindcss init -p
```

```bash
printf '@tailwind base;\n@tailwind components;\n@tailwind utilities;\n' > styles/globals.css
```

- `tailwind.config.js`

```js
module.exports = {
  corePlugins: {
    preflight: false
  },
  important: '#__next',
  content: [
    './pages/**/*.{js,ts,jsx,tsx}',
    './components/**/*.{js,ts,jsx,tsx}'
  ],
  darkMode: true,
  theme: {
    colors: {
      white: '#fff',
      black: '#000',
      ...require('@ant-design/colors')
    },
    extend: {}
  },
  plugins: []
}
```

## Index example and for static export

- `package.json`

```json
{
  "scripts": {
    "export": "next build && next export"
  }
}
```

```bash
rm styles/Home.module.css
```

- `pages/index.tsx`

```tsx
import { Button, DatePicker, message } from 'antd'
import type { NextPage } from 'next'
import Head from 'next/head'
import Image from 'next/image'
import { useState } from 'react'

const Card = ({
  href,
  header,
  paragraph
}: {
  href: string
  header: string
  paragraph: string
}) => (
  <a
    href={href}
    className="m-4 p-6 text-left no-underline border border-solid border-white rounded-xl transition-colors max-w-xs text-white hover:text-volcano-primary hover:border-volcano-primary"
  >
    <h2 className="mb-4 text-2xl text-volcano-primary">{header} &rarr;</h2>
    <p className="m-0 text-xl">{paragraph}</p>
  </a>
)

const Home: NextPage = () => {
  const [count, setCount] = useState(0)
  return (
    <div className="py-8">
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className="min-h-screen px-16 flex flex-1 flex-col justify-center items-center">
        <h1 className="m-0 text-6xl text-center">
          Welcome to <a href="https://nextjs.org">Next.js!</a>
        </h1>

        <p className="text-center mt-12 mb-6 text-2xl">
          Get started by editing{' '}
          <code className="rounded p-3 text-base font-mono">
            pages/index.tsx
          </code>
        </p>

        <div>
          <Button type="primary" onClick={() => setCount(count + 1)}>
            Count: {count}
          </Button>
          <DatePicker
            onChange={(date) => {
              if (date !== null) {
                message.info(date.toISOString())
              }
            }}
          />
        </div>

        <div className="flex flex-col sm:flex-row w-full sm:max-w-3xl justify-center items-stretch flex-wrap">
          <Card
            header="Documentation"
            paragraph="Find in-depth information about Next.js features and API."
            href="https://nextjs.org/docs"
          />
          <Card
            header="Learn"
            paragraph="Learn about Next.js in an interactive course with quizzes!"
            href="https://nextjs.org/learn"
          />
          <Card
            header="Examples"
            paragraph="iscover and deploy boilerplate example Next.js projects."
            href="https://github.com/vercel/next.js/tree/master/examples"
          />
          <Card
            header="Deploy"
            paragraph="Instantly deploy your Next.js site to a public URL with Vercel."
            href="https://vercel.com/new"
          />
        </div>
      </main>

      <footer className="flex flex-1 py-8 border-0 border-t border-t-white border-solid justify-center items-center">
        <a
          className="flex justify-center items-center grow"
          href="https://vercel.com"
          target="_blank"
          rel="noopener noreferrer"
        >
          Powered by{' '}
          <span className="h-4 ml-2 invert">
            <Image
              src="/vercel.svg"
              alt="Vercel Logo"
              width={72}
              height={16}
              loader={({ src }) => src}
              unoptimized
            />
          </span>
        </a>
      </footer>
    </div>
  )
}

export default Home
```
