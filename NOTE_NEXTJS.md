# Next.js Note

- next: `12.2.x`, react: `18.2.0`
- <https://nextjs.org/docs/getting-started>

## Next.js + antd + tailwindCSS

```bash
npx create-next-app@latest --typescript
```

```bash
cd my-app
```

```bash
npm i \
antd \
@ant-design/icons \
@ant-design/colors \
moment
```

```bash
npm add -D \
next-with-less \
less \
tailwindcss \
postcss \
autoprefixer
```

```bash
npx tailwindcss init -p
```

```bash
rm styles/Home.module.css styles/globals.css
```

- `package.json`

```json
{
  "prettier": {
    "semi": false,
    "singleQuote": true
  }
}
```

- `next.config.js`

```js
const { presetDarkPalettes } = require('@ant-design/colors')
const { getThemeVariables } = require('antd/dist/theme')

/** @type {import('next').NextConfig} */
module.exports = require('next-with-less')({
  reactStrictMode: true,
  lessLoaderOptions: {
    lessOptions: {
      modifyVars: {
        ...getThemeVariables({
          dark: true,
        }),
        'primary-color': presetDarkPalettes.cyan.primary,
      },
    },
  },
})
```

- `pages/_app.tsx`

```tsx
import { ConfigProvider } from 'antd'
import 'antd/dist/antd.dark.less'
import zhTW from 'antd/lib/locale/zh_TW'
import moment from 'moment'
import 'moment/locale/zh-tw'
import type { AppProps } from 'next/app'
import 'tailwindcss/tailwind.css'

moment.locale('zh-tw')

export default function MyApp({ Component, pageProps }: AppProps) {
  return (
    <ConfigProvider locale={zhTW}>
      <Component {...pageProps} />
    </ConfigProvider>
  )
}
```

- `tailwind.config.js`

```js
const { presetDarkPalettes } = require('@ant-design/colors')

/** @type {import('tailwindcss').Config} */
module.exports = {
  corePlugins: {
    preflight: false,
  },
  important: '#__next',
  content: [
    './pages/**/*.{js,ts,jsx,tsx}',
    './components/**/*.{js,ts,jsx,tsx}',
  ],
  theme: {
    extend: {
      colors: {
        white: '#fff',
        black: '#000',
        ...presetDarkPalettes,
      },
    },
  },
  plugins: [],
}
```

- `pages/index.tsx`

```tsx
import { Button, DatePicker, message } from 'antd'
import type { NextPage } from 'next'
import Head from 'next/head'
import Image from 'next/image'
import { useState } from 'react'

const Card = ({
  href,
  header,
  paragraph,
}: {
  href: string
  header: string
  paragraph: string
}) => (
  <a
    href={href}
    className="m-4 p-6 text-left no-underline border border-solid border-white rounded-xl transition-colors max-w-xs text-white hover:text-cyan-5 hover:border-cyan-5"
  >
    <h2 className="mb-4 text-2xl text-cyan-5">{header} &rarr;</h2>
    <p className="m-0 text-xl">{paragraph}</p>
  </a>
)

const Home: NextPage = () => {
  const [count, setCount] = useState(0)
  return (
    <div className="py-8">
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className="min-h-screen px-16 flex flex-1 flex-col justify-center items-center">
        <h1 className="m-0 text-6xl text-center">
          Welcome to <a href="https://nextjs.org">Next.js!</a>
        </h1>

        <p className="text-center mt-12 mb-6 text-2xl">
          Get started by editing{' '}
          <code className="rounded p-3 text-base font-mono">
            pages/index.tsx
          </code>
        </p>

        <div className="flex space-x-2">
          <Button type="primary" onClick={() => setCount(count + 1)}>
            Count: {count}
          </Button>
          <DatePicker
            onChange={(date) => {
              if (date !== null) {
                message.info(date.toISOString())
              }
            }}
          />
        </div>

        <div className="flex flex-col sm:flex-row w-full sm:max-w-3xl justify-center items-stretch flex-wrap">
          <Card
            header="Documentation"
            paragraph="Find in-depth information about Next.js features and API."
            href="https://nextjs.org/docs"
          />
          <Card
            header="Learn"
            paragraph="Learn about Next.js in an interactive course with quizzes!"
            href="https://nextjs.org/learn"
          />
          <Card
            header="Examples"
            paragraph="iscover and deploy boilerplate example Next.js projects."
            href="https://github.com/vercel/next.js/tree/master/examples"
          />
          <Card
            header="Deploy"
            paragraph="Instantly deploy your Next.js site to a public URL with Vercel."
            href="https://vercel.com/new"
          />
        </div>
      </main>

      <footer className="flex flex-1 py-8 border-0 border-t border-t-white border-solid justify-center items-center">
        <a
          className="flex justify-center items-center grow"
          href="https://vercel.com"
          target="_blank"
          rel="noopener noreferrer"
        >
          Powered by
          <span className="h-4 ml-2 filter invert">
            <Image
              src="/vercel.svg"
              alt="Vercel Logo"
              width={72}
              height={16}
              loader={({ src }) => src}
              unoptimized
            />
          </span>
        </a>
      </footer>
    </div>
  )
}

export default Home
```
