# Next.js Note

- <https://nextjs.org/docs/getting-started>

## Next.js + antd + tailwindCSS

```bash
npx create-next-app@latest --typescript
```

```bash
cd my-app
```

```bash
printf "audit=false\nfund=false\nloglevel=error\nupdate-notifier=false\n" > .npmrc
```

```bash
printf "NEXT_TELEMETRY_DISABLED=1\n" > .env
```

```bash
npm i -D \
antd \
@ant-design/icons \
@ant-design/colors \
moment \
next-with-less \
less \
less-loader \
tailwindcss \
postcss \
autoprefixer \
prettier
```

```bash
npx tailwindcss init -p
```

```bash
rm styles/Home.module.css styles/globals.css .eslintrc.json
```

- `package.json`

```json
{
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "export": "next build && next export",
    "start": "next start",
    "lint": "next lint",
    "reset": "sudo rm -rf node_modules .next out && npm i"
  },
  "eslintConfig": {
    "extends": ["next/core-web-vitals"]
  },
  "prettier": {
    "arrowParens": "avoid",
    "singleQuote": true,
    "semi": true
  }
}
```

- `next.config.js`

```js
const { presetPalettes } = require('@ant-design/colors');
const withLess = require('next-with-less');

/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  images: {
    loader: 'custom',
  },
  swcMinify: true,
  compiler: {
    removeConsole: true,
  },
  lessLoaderOptions: {
    lessOptions: {
      modifyVars: {
        'primary-color': presetPalettes.blue.primary,
      },
    },
  },
};

module.exports = withLess(nextConfig);
```

- `pages/_app.tsx`

```tsx
import { ConfigProvider } from 'antd';
import 'antd/dist/antd.less';
import zhTW from 'antd/lib/locale/zh_TW';
import moment from 'moment';
import 'moment/locale/zh-tw';
import type { AppProps } from 'next/app';
import 'tailwindcss/tailwind.css';

moment.locale('zh-tw');

export default function MyApp({ Component, pageProps }: AppProps) {
  return (
    <ConfigProvider locale={zhTW}>
      <Component {...pageProps} />
    </ConfigProvider>
  );
}
```

- `tailwind.config.js`

```js
const { presetPalettes } = require('@ant-design/colors');

/** @type {import('tailwindcss').Config} */
module.exports = {
  corePlugins: {
    preflight: false,
  },
  important: '#__next',
  content: [
    './pages/**/*.{js,ts,jsx,tsx}',
    './components/**/*.{js,ts,jsx,tsx}',
  ],
  theme: {
    extend: {
      colors: {
        white: '#fff',
        black: '#000',
        primary: presetPalettes.blue.primary,
        ...presetPalettes,
      },
    },
  },
  plugins: [],
};
```

- `pages/index.tsx`

```tsx
import {
  Button,
  Card,
  Col,
  DatePicker,
  Divider,
  message,
  Row,
  Space,
  Typography,
} from 'antd';
import type { NextPage } from 'next';
import Head from 'next/head';
import Image from 'next/image';
import { useState } from 'react';
const { Title, Paragraph, Link, Text } = Typography;

const Home: NextPage = () => {
  const [count, setCount] = useState(0);

  return (
    <>
      <Head>
        <title>Next.js + Antd + TailwindCSS</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className="min-h-screen flex flex-col justify-center items-center gap-5">
        <Row justify="center">
          <Col>
            <Title level={1} className="m-0">
              Welcome to <Link href="https://nextjs.org">Next.js!</Link>
            </Title>
          </Col>
        </Row>

        <Row justify="center">
          <Col>
            <Title level={3} className="m-0">
              Get started by editing <Text code>pages/index.tsx</Text>
            </Title>
          </Col>
        </Row>

        <Row justify="center">
          <Col>
            <Space>
              <Button type="primary" onClick={() => setCount(count + 1)}>
                Count: {count}
              </Button>
              <DatePicker
                onChange={date => {
                  if (date !== null) {
                    message.info(date.toISOString());
                  }
                }}
              />
            </Space>
          </Col>
        </Row>

        <Row justify="center">
          <Col span={12}>
            <Row gutter={[16, 16]}>
              <Col span={12}>
                <Card
                  hoverable
                  title={
                    <Link href="https://nextjs.org/docs">Documentation</Link>
                  }
                >
                  <Paragraph>
                    Find in-depth information about Next.js features and API.
                  </Paragraph>
                </Card>
              </Col>
              <Col span={12}>
                <Card
                  hoverable
                  title={<Link href="https://nextjs.org/learn">Learn</Link>}
                >
                  <Paragraph>
                    Learn about Next.js in an interactive course with quizzes!
                  </Paragraph>
                </Card>
              </Col>
              <Col span={12}>
                <Card
                  hoverable
                  title={
                    <Link href="https://github.com/vercel/next.js/tree/master/examples">
                      Examples
                    </Link>
                  }
                >
                  <Paragraph>
                    Discover and deploy boilerplate example Next.js projects.
                  </Paragraph>
                </Card>
              </Col>
              <Col span={12}>
                <Card
                  hoverable
                  title={<Link href="https://vercel.com/new">Deploy</Link>}
                >
                  <Paragraph>
                    Instantly deploy your Next.js site to a public URL with
                    Vercel.
                  </Paragraph>
                </Card>
              </Col>
            </Row>
          </Col>
        </Row>

        <Divider />

        <Row justify="center" align="middle">
          <Col>
            <Link
              href="https://vercel.com"
              target="_blank"
              rel="noopener noreferrer"
            >
              <Row gutter={[8, 8]}>
                <Col>Powered by</Col>
                <Col>
                  <Image
                    src="/vercel.svg"
                    alt="Vercel Logo"
                    width={72}
                    height={16}
                    loader={({ src }) => src}
                    unoptimized
                  />
                </Col>
              </Row>
            </Link>
          </Col>
        </Row>
      </main>
    </>
  );
};

export default Home;
```
