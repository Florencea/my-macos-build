#! /usr/bin/env bash
set -o errexit
set -o pipefail

chkcmd "brew"
chkcmd "git"

### Upgrade homebrew apps/clis
cd "$HOME"
brew upgrade

### Sync git projects
cd "$(dirname $0)"
cd "../../"
for PROJECT in $(ls .); do
  cd "$PROJECT"
  if [ -d .git ]; then
    git pull --all --quiet && printf "Sync \033[1m%s\033[0m ok\n" "$PROJECT" &
  fi
  cd "../"
done

wait
